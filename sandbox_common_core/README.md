# sandbox_common_core

Eclipse-independent common core module for sandbox utilities.

## Overview

`sandbox_common_core` is a **plain Maven JAR** (no OSGi/Eclipse dependencies beyond JDT Core) that contains the core utility classes extracted from `sandbox_common`. This separation enables:

- **Standalone usage**: Use HelperVisitor, TriggerPattern API, and mining utilities without an Eclipse runtime
- **Fast testing**: Tests can run without Xvfb or target platform resolution
- **CLI tools**: Build refactoring-mining tools without Eclipse dependencies
- **Lightweight dependency**: Only requires `org.eclipse.jdt:org.eclipse.jdt.core`

## Packages

| Package | Description |
|---------|-------------|
| `org.sandbox.jdt.internal.common` | HelperVisitor API, LambdaASTVisitor, builders, and visitor utilities |
| `org.sandbox.jdt.triggerpattern.api` | TriggerPattern engine, pattern matching, guard expressions, fix utilities |
| `org.sandbox.jdt.triggerpattern.internal` | Pattern/hint file parsers, placeholder matching |

## Dependency Graph

```
sandbox_common_core (JAR, only JDT Core)
    ↑
    ├── sandbox_common (OSGi bundle, re-exports core)
    │       ↑
    │       ├── sandbox_junit_cleanup
    │       ├── sandbox_encoding_quickfix
    │       ├── sandbox_triggerpattern
    │       └── ... (all existing plugins)
    │
    └── sandbox_common_test (plain Maven JAR, tests core + common)
```

## Building

```bash
# Build standalone (no Eclipse target platform needed)
mvn clean verify -pl sandbox_common_core

# Install to local repository
mvn install -pl sandbox_common_core -DskipTests
```

## Usage as Dependency

### Maven (plain JAR)
```xml
<dependency>
    <groupId>org.sandbox</groupId>
    <artifactId>sandbox_common_core</artifactId>
    <version>${project.version}</version>
</dependency>
```

### OSGi Bundle
The JAR includes OSGi manifest headers (generated by bnd-maven-plugin) with:
- `Bundle-SymbolicName: sandbox_common_core`
- Exported packages for all three packages

### Eclipse Plugin (via sandbox_common)
Existing Eclipse plugins should continue to depend on `sandbox_common` which re-exports `sandbox_common_core` with `visibility:=reexport`.
